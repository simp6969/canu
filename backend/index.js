const connect = require("./mongodb/mongo.js");
const express = require("express");
const cors = require("cors");
const model = require("./mongodb/scheme.js");
const app = express();
const signature = [
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠟⢋⣤⠚⠉⠁⠀⠀⠀⠀⠈⣿⣿⣧⡀⠉⠀⠀⢀⣴⣿⣿⠏⠀⠀⠀⢀⣉⠛⠿⣿⠸⢶⣤⣌⠙⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿\n",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡟⠁⡠⣾⣿⣿⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣇⠀⣠⣶⣿⣿⣿⡟⠀⠀⣰⣷⣿⣿⣿⣦⠌⠓⠦⡙⠻⣷⣄⠹⣿⣿⣿⣿⣿⣿⣿⣿⣿\n",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⢺⣿⣿⣿⠃⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣧⢠⣿⣿⣿⣿⡟⠀⠀⣰⣿⣿⣿⣿⡟⠀⠀⠀⠀⠀⠑⠀⠙⠃⠈⠻⣿⣿⣿⣿⣿⣿⣿\n",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠸⣿⣿⣿⠁⠀⠀⠀⠀⠀⠀⠀⢿⣿⣿⣇⣸⣿⣿⣿⠟⠀⠀⡰⣿⣿⣿⣿⡿⠀⠀⢀⣠⣴⢶⠄⢀⣴⣶⣤⡀⠈⢿⣿⣿⣿⣿⣿\n",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠿⢿⣿⣿⣿⣿⣿⡇⠛⠉⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠉⠙⠛⠛⠀⠀⠀⠙⠛⠿⣿⣿⠃⠀⠀⢾⣿⣿⣶⡄⢀⣵⣿⣿⡇⠀⠀⠙⣿⣿⣿⣿\n",
  "⣿⢟⣛⠻⠟⣩⣭⡙⢋⣴⣿⡆⠋⣩⣤⡙⡿⠛⠠⠐⠀⠄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣠⣴⣾⣿⣶⣦⣤⣄⡀⠀⠀⢀⣀⠖⢀⡈⠉⠛⠿⣇⣸⡿⠿⠛⢁⡀⠳⣦⡈⢰⣨⡙\n",
  "⣿⣿⣿⡇⢠⣿⣿⠁⠘⠉⠛⢀⡀⠀⠘⠁⡀⠤⠀⠒⠂⠈⠉⠉⠁⠀⠀⠀⠀⠀⠁⠈⠉⠀⠀⠤⠉⠛⠿⠟⠋⠋⠑⠂⠀⢩⠀⣟⣠⣾⣿⡗⢚⡿⢶⣾⣿⣏⣇⠀⣿⠟⠀⠙⠓\n",
  "⣿⣿⣿⣿⢸⣿⡿⢀⠀⢀⣴⠛⠉⠀⠀⢀⣠⣴⣦⡄⠀⣀⢀⡴⠂⢀⡤⠀⢠⣴⣶⢠⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠐⢬⡙⠋⣡⣾⣿⣄⠹⣿⣽⡇⠀⣷⠄⠉⠉⢀\n",
  "⣿⣿⣿⡏⠈⠙⣡⣿⣿⣿⣷⣤⠄⢀⣴⣿⡿⠋⢉⣤⢶⣿⠛⢁⣤⣤⠄⠀⣄⣉⡙⠛⠃⠸⢷⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⢠⣄⠸⣿⣿⣿⣿⡆⢈⣉⠀⠈⡡⠔⢁⡔⢁\n",
  "⣿⣿⣉⣵⣦⣴⣿⠿⠟⣛⣋⡁⣶⣜⠻⠋⠀⠀⡼⠋⣸⠃⣠⣾⣿⠋⢰⣿⣿⣿⣿⣿⡄⢲⣦⣤⣀⢀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠛⠉⠂⢈⡛⢛⣉⠴⠟⠃⠀⠈⣤⣾⣿⢀⡙\n",
  "⣿⣿⣿⣿⣿⣿⣷⣾⣿⣿⣿⣷⣌⡛⠁⠀⠀⠈⣡⣾⠃⣴⣿⣿⠟⣀⢸⣿⣿⣿⣿⣿⣿⡄⢻⣿⣿⡄⢿⣷⣦⢤⣀⠀⠀⠀⠀⠀⠀⣠⣾⣿⣿⢼⣿⣷⡆⠀⠀⠀⠘⠿⣿⣿⣴\n",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠛⠀⢀⡄⢸⢸⣿⣧⣾⣿⠟⣡⣶⣄⢘⠿⣿⣿⣿⣿⣿⣿⠈⢿⣿⡇⠘⣿⣿⠘⣿⣿⣖⣄⠀⠀⠀⠻⠿⠭⠁⠠⠽⠿⠿⠂⠀⠐⣦⣀⠉⢼⣿\n",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⠟⣫⠀⡀⢠⣿⠃⣿⢸⣿⡟⣿⠃⣼⣿⣿⣿⡄⠁⣿⣿⣿⣿⣿⡏⣰⣄⠻⣷⠰⡘⢿⡆⢻⣿⣿⡿⠀⡄⢀⠀⠀⠀⢰⠀⠀⠀⠀⢀⠀⠀⠙⢯⡄⠈⢻\n",
  "⣿⣿⣿⣿⡿⠛⣛⣩⣴⣾⡏⡸⠁⣼⡏⡀⣿⡀⣿⡇⠀⡼⣿⣿⣿⣿⣷⡀⠸⣿⣿⣿⣿⠁⢻⡿⢷⡈⠃⠱⠌⠃⠄⢿⣿⣇⠀⠡⡈⠃⠀⠀⠆⠀⣀⠔⠀⠺⣿⡆⠄⠈⠇⢸⣿\n",
  "⣿⣿⡿⢋⣴⣿⣿⣿⣿⣿⠀⢠⡇⣿⢄⠀⠹⣧⢹⡇⠸⠃⠈⠙⠒⠩⢙⣷⣄⠹⣿⣿⣇⠁⠸⠅⢀⡀⠀⠀⠀⠀⠀⠈⢿⣿⠀⣦⣌⣁⡀⠀⠀⠀⠀⣀⠐⠠⠈⠉⠄⠀⣤⣀⣻\n",
  "⡿⠋⠀⠀⠻⣿⣿⣿⣿⣿⠀⣾⡇⣿⢸⢸⡄⢈⣦⡆⢠⣠⣴⣶⣶⣦⣤⣿⣿⣷⡘⢿⣿⡀⠀⢺⣿⠃⠀⣤⣄⠀⣤⡀⠈⠙⢰⣿⣿⣿⡇⠀⡧⠰⣄⣉⠛⠂⠀⠀⠠⠀⢿⣿⣿\n",
  "⢳⣿⡄⠀⠀⠘⣿⣿⣿⣿⡀⣿⡇⠹⠀⣟⣷⡀⢻⣷⠈⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣦⡙⠷⡈⢿⣿⡀⠩⠿⠇⠀⡿⢁⡴⢠⣿⠏⢸⣿⡇⠠⣶⡀⢻⣿⣿⣇⠀⢠⡀⠀⠘⣿⣿\n",
  "⣀⣿⡇⠀⠀⠀⠈⠿⠿⢛⣃⠉⡤⠀⠀⠘⣿⣿⠀⠙⢧⠘⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣦⣤⣬⣽⣿⣷⣶⣾⣷⠟⣡⡿⢃⣴⣿⠃⠁⢠⣿⣷⡀⢿⣿⣿⡄⠈⠿⠄⠀⣹⣿\n",
  "⠎⠚⠀⠀⠀⠀⠀⠀⢿⣿⡿⠋⠀⣀⣀⠀⠈⢿⣇⠀⠀⢱⣬⣽⣿⣿⣿⠿⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣛⣋⣡⠞⣡⣴⣽⣿⠏⠀⠀⢸⣿⣿⣷⡈⢿⣿⣧⠀⢶⣿⣿⣿⣿\n",
  " ⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠔⣋⣴⣿⠏⣠⠀⡄⠉⠂⠀⠀⢿⣿⣿⣿⣿⣄⠻⢿⣿⣿⠿⠟⣰⣿⣿⣿⢿⡿⠿⠛⠁⣺⣿⣿⣿⠟⠀⠀⠀⢸⣿⣿⣿⣷⠀⠹⣿⣦⠈⢿⣿⣿⣿\n",
  " ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠿⠟⠋⢡⣾⣯⠀⢷⠀⢅⠀⣶⣄⡙⢿⣿⣿⣿⣿⣿⣿⣶⣾⣿⣿⣿⣿⣿⣦⡀⠠⣴⣾⠿⠟⠋⠁⠀⠀⠀⠀⠀⢻⢿⣿⣿⣷⠀⠈⠻⣧⠈⢻⣿⣿\n",
  "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⠞⣡⣿⡿⠿⡀⢀⠀⠘⣧⠘⢿⡿⣦⡙⠻⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠛⢉⠀⣤⣤⠀⣴⣶⣇⠀⠀⡀⢰⡇⢠⠈⢾⢿⠻⣿⣷⡄⠀⢨⣷⡀⠹⣿\n",
  "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠉⢤⡒⣂⣀⡄⠁⠀⠈⠃⠀⠃⢈⠉⠀⠈⠛⠿⡿⠿⠟⣋⣩⣴⣾⢡⣿⢰⣿⣿⠀⣿⡿⠁⡄⢰⡇⢸⡇⢸⣷⡈⠻⠷⠌⠛⠃⠀⠻⢿⣿⣦⣬\n",
  "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⣕⣾⣿⡦⡙⢿⣦⠈⣶⡄⠀⠀⢀⠙⠿⠢⠀⡐⠲⣾⣿⣿⣿⣿⢃⣿⣿⠘⠻⠟⠀⣯⣤⡾⣇⢸⡅⢸⣿⠀⢿⣿⣶⣶⠐⢸⡇⢰⡀⢦⣉⠻⢿\n",
  "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣿⣿⣷⡅⠈⢿⡆⠸⣿⠀⢱⠀⠠⠐⡇⠡⡈⠳⣌⠻⣿⣿⡏⠘⢿⣯⢸⣿⠀⡀⣿⣿⡇⢿⠀⢷⡀⢻⣇⠘⣿⣿⣿⠀⢸⣇⢸⣷⡈⢻⣿⣶\n",
  "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣿⣿⣿⣿⣧⡈⢻⠀⡯⡆⢸⡇⠀⢡⠈⢆⠀⠀⠈⢳⡌⢿⠁⣀⢸⣿⡄⣿⡆⡇⢹⣿⣧⠘⡂⠈⠻⢠⠹⠆⠹⣿⣿⡇⢺⣿⠈⣿⣿⣄⠙⣿\n",
  "⠀⠀⠀⣀⣀⢀⣀⡀⠀⠀⢀⣾⣿⣿⣿⣿⣿⣿⠿⣾⠀⢻⡇⢸⡏⡄⠀⢧⡀⢣⠀⠠⡀⢿⡄⠼⢡⣾⣿⣧⠸⣇⢳⠘⣿⣿⣷⡇⢸⡆⡘⢳⣦⡀⠹⣿⣷⡘⣿⠆⠹⣿⣿⣦⡈\n",
  "⠀⠀⠀⠀⠉⠉⠁⠀⢀⣰⣾⣿⣿⣿⣿⣿⣿⣿⣿⣾⠀⡴⠀⣾⣏⣿⡆⢸⣷⡀⠃⠀⠁⣼⡿⢡⣄⠻⣿⣿⣧⠙⣆⠃⠹⣿⣿⣿⠸⡇⣷⠈⢻⣿⣦⠙⢿⡇⡿⡌⣆⠹⣿⣿⣷\n",
  "⠀⠀⠀⠀⠀⠀⠀⠈⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠈⠁⠈⠉⠉⠉⠉⠀⠉⠁⠀⠈⠀⠈⠀⠉⠈⠀⠈⠉⠛⠓⠈⠁⠀⠈⠉⠉⠀⠁⠉⠀⠈⠉⠁⠀⠈⠁⠁⠃⠛⠂⠉⠉⠉\n",
];

connect();
app.use(cors());
app.use(express.json());

app.get("/", (req, res) => {
  res.json(signature);
});
// tested
app.get("/path/:id", (req, res) => {
  const { id } = req.params;
  model.PathModel.findOne({ id: id })
    .then((docs) => {
      res.json(docs);
    })
    .catch((err) => {
      console.log(err);
    });
});
// tested
app.post("/path/:id", async (req, res) => {
  const body = req.body;
  if (body.mode === "update") {
    console.log("update");
    await model.PathModel.findOneAndUpdate(
      { id: body.id },
      { $set: { path: body.path } }
    );
  } else {
    model.PathModel.create(body);
  }
  res.json(signature);
});

app.listen(8080);
